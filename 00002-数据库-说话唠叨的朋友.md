# 数据库-一个唠叨的朋友

今天我和几个朋友去买食材，我问几个朋友他们买了什么。

赵大宝说：

- 我叫赵大宝，住在苏州市虎丘区，买了一盒铁塔牌淡奶油，生产日期是2021年2月8日，保质期6个月，花了50元
- 我叫赵大宝，住在苏州市虎丘区，买了一袋高筋面粉，生产日期是2021年2月8日，保质期12个月，花了80元
- 我叫赵大宝，住在苏州市虎丘区，买了一块巧克力，生产日期是2021年2月8日，保质期12个月，花了30元


钱多多说：

- 我叫钱多多，住在杭州市西湖区，买了一盒铁塔牌淡奶油，生产日期是2021年2月8日，保质期6个月，花了50元
- 我叫钱多多，住在杭州市西湖区，买了一袋高筋面粉，生产日期是2021年2月8日，保质期12个月，花了80元
- 我叫钱多多，住在杭州市西湖区，买了一块巧克力，生产日期是2021年2月8日，保质期12个月，花了30元



大家有没有发现问题？是的，他们说话太唠叨了，让人崩溃。赵大宝和钱多多把自己的住址重复了三遍！他们买的是同样的东西，钱多多却又把产品信息重复了一遍！如果再来一个李寻欢，我的大脑的内存就要不够用了。

> 这个问题 Edgar F. Codd 在1960年到1970年反复遇到，一怒之下他在1970年发表了论文"A Relational Model of Data for Large Shared Data Banks"，提出了关系型数据模型。Edgar把自己从唠叨中解救出来，并奠定了关系型数据库的基石，开启了轰轰烈烈的SQL时代。近年来虽然出现了No-SQL的数据库，但整个互联网工业的大厦还是建立在Edgar的关系模型之上。


根据Edgar的理论，

- 我给我的朋友编号
  * 赵大宝编号001，住在苏州市虎丘区
  * 钱多多编号002，住在杭州市西湖区
  * 李寻欢编号003，住在上海市长宁区
- 我给产品编号
  * 铁塔牌淡奶油编号111，生产日期是2021年2月8日，保质期6个月，50元
  * 高筋面粉编号222，生产日期是2021年2月8日，保质期12个月，80元
  * 巧克力编号333，生产日期是2021年2月8日，保质期12个月，30元

- 现在我再问他们，我脑子里就不需要存储那么多冗余的信息
  * 001买了111
  * 001买了222
  * 001买了333

  * 002买了111
  * 002买了222
  * 002买了333



我们把编号叫做primary key（主键），它在同一个表里不会重复(unique identifier)，所以我们只要知道了primary key我们就能找到它代表的详细信息。


数据库（database），data的base，数据的仓库。看起来高深莫测，实际上只是一些Excel的集合，而且是最简单的Excel。在这些Excel里，没有函数，没有宏，没有复杂的格式，只有最简单的一行一行的数字。

- 每一个Excel我们叫一张表(Table)，表里有行（Row）和列（Column）
- 我们有一个表头，用来代表数据的含义，用来规定数据的单位和格式
  
数据库设计的一个重要内容，合理设计每个表的内容，用主键（primary key）建立联系（relationship），避免冗余。

根据Edgar的理论：

- 把我们感觉唠叨的内容找出来
- 把它们放到一张表中
- 给它们编号
- 下一次用到这个内容，只需要用编号代表它


理解了Edgar的理论，还可以在PowerBI中，设计更清晰的数据结构，做出更炫的Dashboard.
